<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Loop of the Recursive Dragon</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="game-container">
    <div id="game-root"></div>
  </div>

  <!-- Initial screen -->
  <template id="tpl-initial">
    <div class="bbs-container">
      <div class="title">Welcome to the Loop of the Recursive Dragon!</div>
      <div class="section">
        In this game, you'll battle monsters to master ideas about computer science, databases,
        cybersecurity, tech ethics, and more. Right answers hurt monsters; wrong answers hurt you.
        Good luck!
        <p>A game by Brendan Shea, PhD (Brendan.Shea@rctc.edu)</p>
      </div>
      <div class="button-container">
        <button class="action-button" data-action="start">Start Adventure</button>
      </div>
    </div>
  </template>

  <!-- Question set selection -->
  <template id="tpl-set-select">
    <div class="bbs-container">
      <div class="title">Choose Your Question Set</div>
      <div class="section">
        Select a question set to begin your adventure.
      </div>
      <select class="question-set-select" data-ref="setSelect"></select>
      <div class="button-container">
        <button class="action-button" data-action="load">Load Questions</button>
      </div>
    </div>
  </template>

  <!-- Encounter screen -->
  <template id="tpl-encounter">
    <div class="bbs-container">
      <div class="title">Loop of the Recursive Dragon</div>
      <div class="monster-container">
        <div class="monster-image-container" data-ref="imgWrap" hidden>
          <img class="monster-image" data-ref="img" alt="">
        </div>
        <div class="monster-info">
          You encounter <span class="bold underline" data-ref="mName"></span>!
          <span data-ref="mDesc"></span><br>
          Monster HP: <span class="yellow" data-ref="mHP"></span><br>
          Your HP: <span class="yellow" data-ref="pHP"></span>,
          Lvl: <span class="yellow" data-ref="pLvl"></span>,
          XP: <span class="yellow" data-ref="pXP"></span><br>
          Weapon: <span class="yellow" data-ref="pWeap"></span>,
          Armor: <span class="yellow" data-ref="pArmor"></span>
        </div>
      </div>
    </div>

    <div class="bbs-container">
      <div class="section">
        <span class="bold">Question:</span> <span data-ref="qText"></span>
      </div>
      <div class="checkbox-container" data-ref="options"></div>
      <div class="button-container">
        <button class="action-button submit-btn" data-action="submit">Submit Answer</button>
      </div>
    </div>
  </template>

  <!-- Results screen -->
  <template id="tpl-results">
    <div class="bbs-container battle-text">
      <div class="section" data-ref="resultsBody"></div>
    </div>
    <div class="button-container">
      <button class="action-button" data-action="continue">Continue</button>
    </div>
  </template>

  <!-- Level up -->
  <template id="tpl-levelup">
    <div class="bbs-container level-up-container">
      <div class="level-up-title">ðŸŽ‰ Congratulations!</div>
      <div class="section">
        <span class="bold">You've reached level <span data-ref="level"></span>!</span><br>
        <span data-ref="levelsGainedText"></span>
      </div>
      <div class="section new-gear">
        <span class="bold">New Gear Unlocked:</span><br>
        <span class="bold">Weapon:</span> <span data-ref="weaponName"></span>
        (<span data-ref="weaponDie"></span>)<br>
        <span class="bold">Armor:</span> <span data-ref="armorName"></span>
        (Defense: <span data-ref="armorDef"></span>)<br>
      </div>
      <div class="section hit-points">
        <span class="bold">Hit Points Increased:</span>
        Your maximum HP is now <span class="yellow" data-ref="maxHP"></span>!
      </div>
    </div>
    <div class="button-container">
      <button class="action-button" data-action="continue">Continue Adventure</button>
    </div>
  </template>

  <!-- Victory -->
  <template id="tpl-victory">
    <div class="bbs-container">
      <div class="title">Victory!</div>
      <div class="section" data-ref="victoryStats"></div>
    </div>
  </template>

  <!-- No questions -->
  <template id="tpl-no-questions">
    <div class="bbs-container">
      <div class="section">
        <span class="bold red">All questions have been answered!</span> The monster flees.
      </div>
      <div class="section" data-ref="finalStats"></div>
    </div>
  </template>

  <!-- Game Over -->
  <template id="tpl-gameover">
    <div class="bbs-container">
      <div class="title">Game Over</div>
      <div class="section" data-ref="gameOverStats"></div>
    </div>
  </template>

  <!-- Hint (appended; not a full-screen template) -->
  <template id="tpl-hint">
    <div class="bbs-container hint">
      <div class="section"><span class="cyan">Hint: <span data-ref="hintText"></span></span></div>
    </div>
  </template>

  <script type="module" src="src/main.js"></script>
</body>
</html>
